<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Permissions</title>
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in §N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure);  }
 *        .example::before { content: "Example " counter(example); }
 *        .issue::before   { content: "Issue "   counter(issue);   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue); } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example); } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li li { font-size:   85%;    }

	.toc > li             { margin: 1.5rem 0;    }
	.toc > li li          { margin: 0.3rem 0;    }
	.toc > li li li       { margin-left: 2rem;   }

	/* Section numbers in a column of their own */
	.toc .secno {
		float: left;
		width: 4rem;
		white-space: nowrap;
	}
	.toc > li li li li .secno {
		font-size: 85%;
	}
	.toc > li li li li li .secno {
		font-size: 100%;
	}

	:not(li) > .toc              { margin-left:  5rem; }
	.toc .secno                  { margin-left: -5rem; }
	.toc > li li li .secno       { margin-left: -7rem; }
	.toc > li li li li .secno    { margin-left: -9rem; }
	.toc > li li li li li .secno { margin-left: -11rem; }

	/* Tighten up indentation in narrow ToCs */
	@media (max-width: 30em) {
		:not(li) > .toc              { margin-left:  4rem; }
		.toc .secno                  { margin-left: -4rem; }
		.toc > li li li              { margin-left:  1rem; }
		.toc > li li li .secno       { margin-left: -5rem; }
		.toc > li li li li .secno    { margin-left: -6rem; }
		.toc > li li li li li .secno { margin-left: -7rem; }
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) :not(li) > .toc              { margin-left:  4rem; }
		body:not(.toc-inline) .toc .secno                  { margin-left: -4rem; }
		body:not(.toc-inline) .toc > li li li              { margin-left:  1rem; }
		body:not(.toc-inline) .toc > li li li .secno       { margin-left: -5rem; }
		body:not(.toc-inline) .toc > li li li li .secno    { margin-left: -6rem; }
		body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	body.toc-sidebar #toc :not(li) > .toc              { margin-left:  4rem; }
	body.toc-sidebar #toc .toc .secno                  { margin-left: -4rem; }
	body.toc-sidebar #toc .toc > li li li              { margin-left:  1rem; }
	body.toc-sidebar #toc .toc > li li li .secno       { margin-left: -5rem; }
	body.toc-sidebar #toc .toc > li li li li .secno    { margin-left: -6rem; }
	body.toc-sidebar #toc .toc > li li li li li .secno { margin-left: -7rem; }

	.toc li {
		clear: both;
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-left: calc(13px + 26.5rem - 50vw);
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-left: calc(40em - 50vw) !important;
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-left: 0 !important;
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed 1.0.0" name="generator">
<style>/* style-md-lists */

            /* This is a weird hack for me not yet following the commonmark spec
               regarding paragraph and lists. */
            [data-md] > :first-child {
                margin-top: 0;
            }
            [data-md] > :last-child {
                margin-bottom: 0;
            }</style>
<style>/* style-counters */

            body {
                counter-reset: example figure issue;
            }
            .issue {
                counter-increment: issue;
            }
            .issue:not(.no-marker)::before {
                content: "Issue " counter(issue);
            }

            .example {
                counter-increment: example;
            }
            .example:not(.no-marker)::before {
                content: "Example " counter(example);
            }
            .invalid.example:not(.no-marker)::before,
            .illegal.example:not(.no-marker)::before {
                content: "Invalid Example" counter(example);
            }

            figure {
                counter-increment: figure;
            }
            figcaption:not(.no-marker)::before {
                content: "Figure " counter(figure);
            }</style>
<style>/* style-dfn-panel */

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }
        .dfn-panel:not(.on) { display: none; }
        .dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
        .dfn-panel > b { display: block; }
        .dfn-panel a { color: black; }
        .dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
        .dfn-panel > b + b { margin-top: 0.25em; }
        .dfn-panel ul { padding: 0; }
        .dfn-panel li { list-style: inside; }
        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled { cursor: pointer; }
        </style>
<style>/* style-selflinks */

            .heading, .issue, .note, .example, li, dt {
                position: relative;
            }
            a.self-link {
                position: absolute;
                top: 0;
                left: calc(-1 * (3.5rem - 26px));
                width: calc(3.5rem - 26px);
                height: 2em;
                text-align: center;
                border: none;
                transition: opacity .2s;
                opacity: .5;
            }
            a.self-link:hover {
                opacity: 1;
            }
            .heading > a.self-link {
                font-size: 83%;
            }
            li > a.self-link {
                left: calc(-1 * (3.5rem - 26px) - 2em);
            }
            dfn > a.self-link {
                top: auto;
                left: auto;
                opacity: 0;
                width: 1.5em;
                height: 1.5em;
                background: gray;
                color: white;
                font-style: normal;
                transition: opacity .2s, background-color .2s, color .2s;
            }
            dfn:hover > a.self-link {
                opacity: 1;
            }
            dfn > a.self-link:hover {
                color: black;
            }

            a.self-link::before            { content: "¶"; }
            .heading > a.self-link::before { content: "§"; }
            dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-autolinks */

            .css.css, .property.property, .descriptor.descriptor {
                color: #005a9c;
                font-size: inherit;
                font-family: inherit;
            }
            .css::before, .property::before, .descriptor::before {
                content: "‘";
            }
            .css::after, .property::after, .descriptor::after {
                content: "’";
            }
            .property, .descriptor {
                /* Don't wrap property and descriptor names */
                white-space: nowrap;
            }
            .type { /* CSS value <type> */
                font-style: italic;
            }
            pre .property::before, pre .property::after {
                content: "";
            }
            [data-link-type="property"]::before,
            [data-link-type="propdesc"]::before,
            [data-link-type="descriptor"]::before,
            [data-link-type="value"]::before,
            [data-link-type="function"]::before,
            [data-link-type="at-rule"]::before,
            [data-link-type="selector"]::before,
            [data-link-type="maybe"]::before {
                content: "‘";
            }
            [data-link-type="property"]::after,
            [data-link-type="propdesc"]::after,
            [data-link-type="descriptor"]::after,
            [data-link-type="value"]::after,
            [data-link-type="function"]::after,
            [data-link-type="at-rule"]::after,
            [data-link-type="selector"]::after,
            [data-link-type="maybe"]::after {
                content: "’";
            }

            [data-link-type].production::before,
            [data-link-type].production::after,
            .prod [data-link-type]::before,
            .prod [data-link-type]::after {
                content: "";
            }

            [data-link-type=element],
            [data-link-type=element-attr] {
                font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
                font-size: .9em;
            }
            [data-link-type=element]::before { content: "<" }
            [data-link-type=element]::after  { content: ">" }

            [data-link-type=biblio] {
                white-space: pre;
            }</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="http://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Permissions</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editor’s Draft, <time class="dt-updated" datetime="2016-06-08">8 June 2016</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a>
     <dt>Latest published version:
     <dd><a href="https://www.w3.org/TR/permissions/">https://www.w3.org/TR/permissions/</a>
     <dt>Feedback:
     <dd><span><a href="mailto:public-webappsec@w3.org?subject=%5Bpermissions%5D%20YOUR%20TOPIC%20HERE">public-webappsec@w3.org</a> with subject line “<kbd>[permissions] <i data-lt="">… message topic …</i></kbd>”</span>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/w3c/permissions/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Mounir Lamouri</span> (<a class="p-org org" href="https://google.com/">Google Inc.</a>)
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Marcos Cáceres</span> (<a class="p-org org" href="https://mozilla.com/">Mozilla</a>)
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Jeffrey Yasskin</span> (<a class="p-org org" href="https://google.com/">Google Inc.</a>)
     <dd class="editor p-author h-card vcard"><span class="p-name fn"></span>
     <dt>Participate:
     <dd><span><a href="https://github.com/w3c/permissions">We are on Github.</a></span>
     <dd><span><a href="https://github.com/w3c/permissions/issues">File a bug.</a></span>
     <dd><span><a href="https://github.com/w3c/permissions/commits/gh-pages">Commit history.</a></span>
     <dt>Implementation status:
     <dd><span><a href="https://code.google.com/p/chromium/issues/detail?id=437770">Blink/Chromium</a></span>
     <dd><span><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1105827">Gecko</a></span>
     <dd><span></span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2016 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
  <div class="p-summary" data-fill-with="abstract">
   <p>The <cite>Permissions Standard</cite> defines common infrastructure for other specifications that need to interact with browser permissions. It also defines an API to allow web applications to query and request changes to the status of a given permission.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress. </p>
   <p> <strong>Changes to this document may be tracked at <a href="https://github.com/w3c/webappsec">https://github.com/w3c/webappsec</a>.</strong> </p>
   <p> The (<a href="http://lists.w3.org/Archives/Public/public-webappsec/">archived</a>) public mailing list <a href="mailto:public-webappsec@w3.org?Subject=%5Bpermissions%5D%20PUT%20SUBJECT%20HERE">public-webappsec@w3.org</a> (see <a href="http://www.w3.org/Mail/Request">instructions</a>)
	is preferred for discussion of this specification.
	When sending e-mail,
	please put the text “permissions” in the subject,
	preferably like this:
	“[permissions] <em>…summary of comment…</em>” </p>
   <p> This document was produced by the <a href="http://www.w3.org/2011/webappsec/">Web Application Security Working Group</a>. </p>
   <p> This document was produced by a group operating under
	the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>.
	W3C maintains a <a href="http://www.w3.org/2004/01/pp-impl/49309/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group;
	that page also includes instructions for disclosing a patent.
	An individual who has actual knowledge of a patent which the individual believes contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. </p>
   <p> This document is governed by the <a href="http://www.w3.org/2015/Process-20150901/" id="w3c_process_revision">1 September 2015 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#scope-of-this-document"><span class="secno">1</span> <span class="content"> Scope of this document </span></a>
    <li><a href="#privacy-considerations"><span class="secno">2</span> <span class="content"> Privacy considerations </span></a>
    <li><a href="#definitions"><span class="secno">3</span> <span class="content">Definitions</span></a>
    <li><a href="#permission-descriptor"><span class="secno">4</span> <span class="content"> Descriptions of permission requests </span></a>
    <li>
     <a href="#permission-operations"><span class="secno">5</span> <span class="content">Permission states</span></a>
     <ol class="toc">
      <li><a href="#reading-current-states"><span class="secno">5.1</span> <span class="content">Reading the current permission state</span></a>
      <li><a href="#requesting-more-permission"><span class="secno">5.2</span> <span class="content">Requesting more permission</span></a>
      <li><a href="#reacting-to-revocation"><span class="secno">5.3</span> <span class="content">Reacting to users revoking permission</span></a>
     </ol>
    <li>
     <a href="#permission-registry"><span class="secno">6</span> <span class="content"> Permission Registry </span></a>
     <ol class="toc">
      <li><a href="#geolocation"><span class="secno">6.1</span> <span class="content"> Geolocation </span></a>
      <li><a href="#notifications"><span class="secno">6.2</span> <span class="content"> Notifications </span></a>
      <li><a href="#push"><span class="secno">6.3</span> <span class="content"> Push </span></a>
      <li><a href="#midi"><span class="secno">6.4</span> <span class="content"> Midi </span></a>
      <li><a href="#media-devices"><span class="secno">6.5</span> <span class="content"> Media Devices </span></a>
      <li><a href="#background-sync"><span class="secno">6.6</span> <span class="content"> Background Sync </span></a>
      <li><a href="#persistent-storage"><span class="secno">6.7</span> <span class="content"> Persistent Storage </span></a>
     </ol>
    <li><a href="#status-of-a-permission"><span class="secno">7</span> <span class="content"> Status of a permission </span></a>
    <li><a href="#navigator-and-workernavigator-extension"><span class="secno">8</span> <span class="content"> Navigator and WorkerNavigator extension </span></a>
    <li><a href="#permissions-interface"><span class="secno">9</span> <span class="content"> Permissions interface </span></a>
    <li><a href="#common-permission-algorithms"><span class="secno">10</span> <span class="content"> Common permission algorithms </span></a>
    <li><a href="#examples"><span class="secno">11</span> <span class="content"> Examples </span></a>
    <li><a href="#acknowledgments"><span class="secno"></span> <span class="content"> Acknowledgments </span></a>
    <li>
     <a href="#conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <section class="non-normative">
    <h2 class="heading settled" data-level="1" id="scope-of-this-document"><span class="secno">1. </span><span class="content"> Scope of this document </span><a class="self-link" href="#scope-of-this-document"></a></h2>
    <p><em>This section is non-normative.</em></p>
    <p> This document’s goal is to specify an API that will help developers to
    handle permissions on the Web platform. Web APIs have different ways to
    deal with permissions. The <a data-link-type="biblio" href="#biblio-notifications">[notifications]</a> API allows developers to
    request a permission and check the permission status explicitly. Others
    might only expose the status to web pages when they try to use the API,
    like the <a data-link-type="biblio" href="#biblio-geolocation-api">[geolocation-API]</a> which fails if the permission was not
    granted without allowing the developer to check beforehand. </p>
    <p> Being able to know whether an API call is going to prompt is useful in
    order to provide a good user experience. Unfortunately, more often than
    not, those prompts can’t be controlled by developers. </p>
    <p> The API specified in this document is meant to provide the tools so
    that web applications can improve their user experience when
    permissions are involved. </p>
    <p> The solution described in this document is meant to be extensible but
    isn’t meant to be applicable to all the current and future permissions
    available in the web platform. If you are working on a specification
    that has a permission model that wouldn’t fit in the model described in
    this document, please contact the editors or file an issue. We would
    love to hear about it. </p>
   </section>
   <section class="non-normative">
    <h2 class="heading settled" data-level="2" id="privacy-considerations"><span class="secno">2. </span><span class="content"> Privacy considerations </span><a class="self-link" href="#privacy-considerations"></a></h2>
    <p><em>This section is non-normative.</em></p>
    <p> Permission states can be used as an element of fingerprinting by
    websites. Usually websites could already have access to the information
    but often through actually using the API which could lead to a
    permission request UI if the permission was not already granted. Thus,
    even though this API doesn’t expose new fingerprinting data to
    websites, it makes it easier for them to have discreet access to it.
    Therefore, implementations are encouraged to have an option for users
    to block (globally or selectively) the querying of permission states. </p>
   </section>
   <section>
    <h2 class="heading settled" data-level="3" id="definitions"><span class="secno">3. </span><span class="content">Definitions</span><a class="self-link" href="#definitions"></a></h2>
    <dl>
     <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="new-information-about-the-users-intent">New information about the user’s intent</dfn>
     <dd> The UA may collect information about a user’s intentions in any way its
      authors believe is appropriate. This information can come from explicit
      user action, aggregate behavior of both the relevant user and other users,
      or other sources this specification hasn’t anticipated. 
     <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="powerful-feature">Powerful feature</dfn>
     <dd> A feature of a UA that some code might not be allowed to access, for
      example because its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">environment settings object</a> doesn’t satisfy
      some criteria, or because the user hasn’t given permission. 
    </dl>
   </section>
   <section>
    <h2 class="heading settled" data-level="4" id="permission-descriptor"><span class="secno">4. </span><span class="content"> Descriptions of permission requests </span><a class="self-link" href="#permission-descriptor"></a></h2>
<pre class="idl def" title="">dictionary <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-permissiondescriptor">PermissionDescriptor</dfn> {
  required <a data-link-type="idl-name" href="#enumdef-permissionname" id="ref-for-enumdef-permissionname-1">PermissionName</a> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionDescriptor" data-dfn-type="dict-member" data-export="" data-type="PermissionName " id="dom-permissiondescriptor-name">name</dfn>;
};
</pre>
    <p> Each <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature-1">powerful feature</a> has one or more aspects that websites can
    request permission to access. To describe these requests, each feature
    defines a subtype of <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-1">PermissionDescriptor</a></code> to be its <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type-1">permission
    descriptor type</a>. </p>
    <div class="example" id="example-descriptors">
     <a class="self-link" href="#example-descriptors"></a> 
     <p> The <code class="idl"><a data-link-type="idl" href="#dom-permissionname-midi" id="ref-for-dom-permissionname-midi-1">"midi"</a></code> feature has two aspects: access to normal messages, and
      access to system exclusive messages. Thus, its permission descriptor type
      is: </p>
<pre>dictionary MidiPermissionDescriptor : PermissionDescriptor {
  boolean sysex = false;
};
</pre>
     <p> The <code class="idl"><a data-link-type="idl" href="https://webbluetoothcg.github.io/web-bluetooth/#dom-permissionname-bluetooth">"bluetooth"</a></code> feature lets sites request to access whatever
      Bluetooth devices are close to to the user’s device. Thus, its descriptor
      type is: </p>
<pre>dictionary BluetoothPermissionDescriptor : PermissionDescriptor {
  DOMString deviceId;
  sequence&lt;<a data-link-type="idl" href="https://webbluetoothcg.github.io/web-bluetooth/#dictdef-bluetoothrequestdevicefilter">BluetoothRequestDeviceFilter</a>> filters;
  sequence&lt;<a data-link-type="idl" href="https://webbluetoothcg.github.io/web-bluetooth/#typedefdef-bluetoothserviceuuid">BluetoothServiceUUID</a>> optionalServices = [];
};
</pre>
     <p> General access to Bluetooth devices is represented by <code>{name: 'bluetooth'}</code>; access to a particular device is represented by <code>{name: 'bluetooth', deviceId: "id"}</code>; and access to a device with a particular
      service is represented by <code>{name: 'bluetooth', filters: [{services: ['service']}]}</code> </p>
    </div>
   </section>
   <section>
    <h2 class="heading settled" data-level="5" id="permission-operations"><span class="secno">5. </span><span class="content">Permission states</span><a class="self-link" href="#permission-operations"></a></h2>
    <p> The user agent is responsible for tracking what <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature-2">powerful features</a> each <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms">realm</a> has the user’s permission to use. Other specifications can
    use the operations defined in this section to retrieve the UA’s notion of
    what permissions are granted or denied, and to ask the user to grant or deny
    more permissions. </p>
    <p> Other specifications can also add more constraints on the UA’s behavior in
    these algorithms. </p>
    <p> Within this section, <var>descriptor</var> is an instance of the <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type-2">permission
    descriptor type</a> of the <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature-3">powerful feature</a> named by <code><var>descriptor</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name-1">name</a></code></code>. </p>
    <section>
     <h3 class="heading settled" data-level="5.1" id="reading-current-states"><span class="secno">5.1. </span><span class="content">Reading the current permission state</span><a class="self-link" href="#reading-current-states"></a></h3>
     <p> <var>descriptor</var>’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="permission-state">permission state</dfn> is one of <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-1">"granted"</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt-1">"prompt"</a></code>, or <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-1">"denied"</a></code>, indicating respectively if the calling
      algorithm should succeed without prompting the user, show the user a
      prompt to decide whether to succeed, or fail without prompting the user.
      The UA must return whichever of these values most accurately reflects the
      user’s intent. Subsequent uses of <var>descriptor</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state-1">permission state</a> with the same <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object">current settings object</a> must return the same value,
      unless the UA receives <a data-link-type="dfn" href="#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent-1">new information about the user’s intent</a>. </p>
     <p class="issue" id="issue-current-entry-incumbent-or-relevant"><a class="self-link" href="#issue-current-entry-incumbent-or-relevant"></a> Safari is the only known UA that returns different results from this
      algorithm for different settings objects with the same origin. We should
      test which of the <a href="https://html.spec.whatwg.org/multipage/webappapis.html#realms-settings-objects-global-objects">several
      possible settings objects</a> it uses. </p>
     <p> Some <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature-4">powerful features</a> have more information associated with them
      than just a <code class="idl"><a data-link-type="idl" href="#enumdef-permissionstate" id="ref-for-enumdef-permissionstate-1">PermissionState</a></code>. For example, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-main/#dom-mediadevices-getusermedia">getUserMedia()</a></code> needs to determine <em>which</em> cameras
      the user has granted the <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#current-realm">current realm</a> permission to access. Each
      of these features defines an <a data-link-type="dfn" href="#extra-permission-data-type" id="ref-for-extra-permission-data-type-1">extra permission data type</a>, and then a <code class="idl"><a data-link-type="idl" href="#enumdef-permissionname" id="ref-for-enumdef-permissionname-2">PermissionName</a></code> <var>name</var>’s <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="extra-permission-data">extra permission data</dfn> is the
      instance of that type matching the UA’s impression of the user’s intent.
      Subsequent uses of <var>name</var>’s <a data-link-type="dfn" href="#extra-permission-data" id="ref-for-extra-permission-data-1">extra permission data</a> must return the
      same value, unless the UA receives <a data-link-type="dfn" href="#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent-2">new information about the user’s
      intent</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.2" id="requesting-more-permission"><span class="secno">5.2. </span><span class="content">Requesting more permission</span><a class="self-link" href="#requesting-more-permission"></a></h3>
     <p class="note" role="note"> The algorithms in this section may wait for user input, so they should not
      be used from other algorithms running on the main thread. </p>
     <div data-algorithm="request-permission-to-use">
      <p> To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="request-permission-to-use">request permission to use</dfn> a <var>descriptor</var>, the UA
        must perform the following steps. This algorithm returns either <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-2">"granted"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-2">"denied"</a></code>. </p>
      <ol>
       <li> If <var>descriptor</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state-2">permission state</a> is not <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt-2">"prompt"</a></code>, return
          that value and abort these steps. 
       <li> Ask the user’s permission for the calling algorithm to use the <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature-5">powerful feature</a> described by <var>descriptor</var>. 
       <li>
         If the user grants permission, return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-3">"granted"</a></code>; otherwise return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-3">"denied"</a></code>. Depending on the details of the user’s interaction, the
          UA may also treat this as <a data-link-type="dfn" href="#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent-3">new information about the user’s
          intent</a> for other <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms">realms</a> with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin">same origin</a>. 
        <p class="note" role="note"> This is intentionally vague about the details of the permission UI
            and how the UA infers user intent. UAs should be able to explore
            lots of UI within this framework. </p>
      </ol>
     </div>
     <div data-algorithm="prompt-user-to-choose">
      <p> To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="prompt-the-user-to-choose">prompt the user to choose</dfn> one of several <var>options</var> associated with a <var>descriptor</var>, the UA must perform the following steps.
        This algorithm returns either <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-4">"denied"</a></code> or one of the options. </p>
      <ol>
       <li> If <var>descriptor</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state-3">permission state</a> is <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-5">"denied"</a></code>,
          return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-6">"denied"</a></code> and abort these steps. 
       <li> If <var>descriptor</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state-4">permission state</a> is <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-4">"granted"</a></code>, the UA may
          return one of <var>options</var> and abort these steps. If the UA returns
          without prompting, then subsequent <a data-link-type="dfn" href="#prompt-the-user-to-choose" id="ref-for-prompt-the-user-to-choose-1">prompts for the user to choose</a> from the same set of
          options with the same <var>descriptor</var> must return the same option, unless
          the UA receives <a data-link-type="dfn" href="#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent-4">new information about the user’s intent</a>. 
       <li> Ask the user to choose one of the options or deny permission, and wait
          for them to choose. If the calling algorithm specified extra
          information to include in the prompt, include it. 
       <li>
         If the user chose an option, return it; otherwise return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-7">"denied"</a></code>.
          Depending on the details of the user’s interaction, the UA may also
          treat this as <a data-link-type="dfn" href="#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent-5">new information about the user’s intent</a> for other <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms">realms</a> with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin">same origin</a>. 
        <p class="note" role="note"> This is intentionally vague about the details of the permission UI
            and how the UA infers user intent. UAs should be able to explore
            lots of UI within this framework. </p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.3" id="reacting-to-revocation"><span class="secno">5.3. </span><span class="content">Reacting to users revoking permission</span><a class="self-link" href="#reacting-to-revocation"></a></h3>
     <p> When the UA learns that the user no longer intends to grant permission for
      a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms">realm</a> to use a feature, it must <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> on <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object">the
      Realm’s settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop">responsible event loop</a> to run that
      feature’s <a data-link-type="dfn" href="#permission-revocation-algorithm" id="ref-for-permission-revocation-algorithm-1">permission revocation algorithm</a>. </p>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="6" id="permission-registry"><span class="secno">6. </span><span class="content"> Permission Registry </span><a class="self-link" href="#permission-registry"></a></h2>
<pre class="idl def" title="">enum <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export="" id="enumdef-permissionname">PermissionName</dfn> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-geolocation" id="ref-for-dom-permissionname-geolocation-1">"geolocation"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-notifications" id="ref-for-dom-permissionname-notifications-1">"notifications"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-push" id="ref-for-dom-permissionname-push-1">"push"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-midi" id="ref-for-dom-permissionname-midi-2">"midi"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-camera" id="ref-for-dom-permissionname-camera-1">"camera"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-microphone" id="ref-for-dom-permissionname-microphone-1">"microphone"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-speaker" id="ref-for-dom-permissionname-speaker-1">"speaker"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-device-info" id="ref-for-dom-permissionname-device-info-1">"device-info"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-background-sync" id="ref-for-dom-permissionname-background-sync-1">"background-sync"</a>,
  <a class="idl-code" data-link-type="enum-value" href="https://webbluetoothcg.github.io/web-bluetooth/#dom-permissionname-bluetooth">"bluetooth"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-persistent-storage" id="ref-for-dom-permissionname-persistent-storage-1">"persistent-storage"</a>,
};
</pre>
    <p> Each enumeration value in the <code class="idl"><a data-link-type="idl" href="#enumdef-permissionname" id="ref-for-enumdef-permissionname-3">PermissionName</a></code> enum identifies a <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature-6">powerful feature</a>. Each <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature-7">powerful feature</a> has the following
    permission-related algorithms and types: </p>
    <dl>
     <dt> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="permission-descriptor-type">permission descriptor type</dfn> 
     <dd>
      <p> <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-2">PermissionDescriptor</a></code> or one of its subtypes.
        If unspecified, this defaults to <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-3">PermissionDescriptor</a></code>. </p>
      <p> The feature can define a <a href="https://en.wikipedia.org/wiki/Partially_ordered_set">partial
        order</a> on descriptor instances. If <var>descriptorA</var> is <dfn class="dfn-paneled" data-dfn-for="PermissionDescriptor" data-dfn-type="dfn" data-noexport="" id="permissiondescriptor-stronger-than">stronger than</dfn> <var>descriptorB</var>, then if <var>descriptorA</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state-5">permission state</a> is <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-5">"granted"</a></code>, <var>descriptorB</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state-6">permission state</a> must also be <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-6">"granted"</a></code>, and
        if <var>descriptorB</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state-7">permission state</a> is <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-8">"denied"</a></code>, <var>descriptorA</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state-8">permission state</a> must also be <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-9">"denied"</a></code>. </p>
      <p class="example" id="example-stronger-than"><a class="self-link" href="#example-stronger-than"></a> <code>{name: <code class="idl"><a data-link-type="idl" href="#dom-permissionname-midi" id="ref-for-dom-permissionname-midi-3">"midi"</a></code>, sysex: true}</code> ("midi-with-sysex") is <a data-link-type="dfn" href="#permissiondescriptor-stronger-than" id="ref-for-permissiondescriptor-stronger-than-1">stronger than</a> <code>{name: <code class="idl"><a data-link-type="idl" href="#dom-permissionname-midi" id="ref-for-dom-permissionname-midi-4">"midi"</a></code>, sysex: false}</code> ("midi-without-sysex"), so if the user denies access to
        midi-without-sysex, the UA must also deny access to midi-with-sysex, and
        similarly if the user grants access to midi-with-sysex, the UA must also
        grant access to midi-without-sysex. </p>
     <dt> An optional <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="extra-permission-data-type">extra permission data type</dfn> 
     <dd> If specified, the <a data-link-type="dfn" href="#extra-permission-data" id="ref-for-extra-permission-data-2">extra permission data</a> algorithm is usable for
      this feature. The feature will specify any constraints on the values this
      algorithm can return. 
     <dt> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="permission-result-type">permission result type</dfn> 
     <dd> <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus-1">PermissionStatus</a></code> or one of its subtypes.
      If unspecified, this defaults to <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus-2">PermissionStatus</a></code>. 
     <dt> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="permission-query-algorithm">permission query algorithm</dfn> 
     <dd> Takes an instance of the <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type-3">permission descriptor type</a> and a new or
      existing instance of the <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type-1">permission result type</a>, and updates the <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type-2">permission result type</a> instance with the query result. Used by <code class="idl"><a data-link-type="idl" href="#permissions" id="ref-for-permissions-1">Permissions</a></code>' <code class="idl"><a data-link-type="idl" href="#dom-permissions-query" id="ref-for-dom-permissions-query-1">query()</a></code> method and the <a href="#PermissionStatus-update">PermissionStatus update steps</a>. If
      unspecified, this defaults to the <a data-link-type="dfn" href="#boolean-permission-query-algorithm" id="ref-for-boolean-permission-query-algorithm-1">boolean permission query
      algorithm</a>. 
     <dt> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="permission-request-algorithm">permission request algorithm</dfn> 
     <dd> Takes an instance of the <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type-4">permission descriptor type</a> and a
      newly-created instance of the <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type-3">permission result type</a>. Uses the
      algorithms in <a href="#requesting-more-permission">§5.2 Requesting more permission</a> to show the user
      any necessary prompt to try to increase permissions, and updates the
      instance <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type-4">permission result type</a> to match. May throw an exception if
      the request can fail exceptionally. (Merely being denied permission is not
      exceptional.) Used by <code class="idl"><a data-link-type="idl" href="#permissions" id="ref-for-permissions-2">Permissions</a></code>' <code class="idl"><a data-link-type="idl" href="#dom-permissions-request" id="ref-for-dom-permissions-request-1">request()</a></code> method.
      If unspecified, this defaults to the <a data-link-type="dfn" href="#boolean-permission-request-algorithm" id="ref-for-boolean-permission-request-algorithm-1">boolean permission request
      algorithm</a>. 
     <dt> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="permission-revocation-algorithm">permission revocation algorithm</dfn> 
     <dd> Takes no arguments. Updates any other parts of the implementation that
      need to be kept in sync with changes in the results of <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state-9">permission
      states</a> or <a data-link-type="dfn" href="#extra-permission-data" id="ref-for-extra-permission-data-3">extra permission data</a>. Run by <code class="idl"><a data-link-type="idl" href="#permissions" id="ref-for-permissions-3">Permissions</a></code>' <code class="idl"><a data-link-type="idl" href="#dom-permissions-revoke" id="ref-for-dom-permissions-revoke-1">revoke()</a></code> method and run when the UA receives <a data-link-type="dfn" href="#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent-6">new
      information about the user’s intent</a>. If unspecified, this defaults to
      doing nothing. 
    </dl>
    <p> A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="boolean-feature">boolean feature</dfn> is a <a data-link-type="dfn" href="#powerful-feature" id="ref-for-powerful-feature-8">powerful feature</a> with all
    of the above types and algorithms defaulted. </p>
    <section>
     <h3 class="heading settled" data-level="6.1" id="geolocation"><span class="secno">6.1. </span><span class="content"> Geolocation </span><a class="self-link" href="#geolocation"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" id="dom-permissionname-geolocation">"geolocation"</dfn> permission is the permission associated with the usage of the <a data-link-type="biblio" href="#biblio-geolocation-api">[geolocation-API]</a>. It is a <a data-link-type="dfn" href="#boolean-feature" id="ref-for-boolean-feature-1">boolean feature</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="6.2" id="notifications"><span class="secno">6.2. </span><span class="content"> Notifications </span><a class="self-link" href="#notifications"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" id="dom-permissionname-notifications">"notifications"</dfn> permission is the permission associated with the usage of the <a data-link-type="biblio" href="#biblio-notifications">[notifications]</a> API. It is a <a data-link-type="dfn" href="#boolean-feature" id="ref-for-boolean-feature-2">boolean feature</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="6.3" id="push"><span class="secno">6.3. </span><span class="content"> Push </span><a class="self-link" href="#push"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" id="dom-permissionname-push">"push"</dfn> permission is the permission associated with the usage of the <a data-link-type="biblio" href="#biblio-push-api">[push-api]</a>. </p>
     <dl>
      <dt> <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type-5">permission descriptor type</a> 
      <dd>
<pre class="idl def">dictionary <dfn class="idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-pushpermissiondescriptor">PushPermissionDescriptor<a class="self-link" href="#dictdef-pushpermissiondescriptor"></a></dfn> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-4">PermissionDescriptor</a> {
  boolean <dfn class="idl-code" data-default="false" data-dfn-for="PushPermissionDescriptor" data-dfn-type="dict-member" data-export="" data-type="boolean " id="dom-pushpermissiondescriptor-uservisibleonly">userVisibleOnly<a class="self-link" href="#dom-pushpermissiondescriptor-uservisibleonly"></a></dfn> = false;
};
</pre>
       <p> <code>{name: "push", userVisibleOnly: false}</code> is <a data-link-type="dfn" href="#permissiondescriptor-stronger-than" id="ref-for-permissiondescriptor-stronger-than-2">stronger than</a> <code>{name: "push", userVisibleOnly: true}</code>. </p>
     </dl>
    </section>
    <section>
     <h3 class="heading settled" data-level="6.4" id="midi"><span class="secno">6.4. </span><span class="content"> Midi </span><a class="self-link" href="#midi"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" id="dom-permissionname-midi">"midi"</dfn> permission is the permission associated with the usage of <a data-link-type="biblio" href="#biblio-webmidi">[webmidi]</a>. </p>
     <dl>
      <dt> <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type-6">permission descriptor type</a> 
      <dd>
<pre class="idl def">dictionary <dfn class="idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-midipermissiondescriptor">MidiPermissionDescriptor<a class="self-link" href="#dictdef-midipermissiondescriptor"></a></dfn> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-5">PermissionDescriptor</a> {
  boolean <dfn class="idl-code" data-default="false" data-dfn-for="MidiPermissionDescriptor" data-dfn-type="dict-member" data-export="" data-type="boolean " id="dom-midipermissiondescriptor-sysex">sysex<a class="self-link" href="#dom-midipermissiondescriptor-sysex"></a></dfn> = false;
};
</pre>
       <p> <code>{name: "midi", sysex: true}</code> is <a data-link-type="dfn" href="#permissiondescriptor-stronger-than" id="ref-for-permissiondescriptor-stronger-than-3">stronger than</a> <code>{name: "midi", sysex: false}</code>. </p>
     </dl>
    </section>
    <section>
     <h3 class="heading settled" data-level="6.5" id="media-devices"><span class="secno">6.5. </span><span class="content"> Media Devices </span><a class="self-link" href="#media-devices"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" id="dom-permissionname-camera">"camera"</dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" id="dom-permissionname-microphone">"microphone"</dfn> , and <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" id="dom-permissionname-speaker">"speaker"</dfn> permissions are associated with permission to use media devices as
      specified in <a data-link-type="biblio" href="#biblio-getusermedia">[GETUSERMEDIA]</a> and <a data-link-type="biblio" href="#biblio-audio-output">[audio-output]</a>. </p>
     <p> If the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object">current settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-browsing-context">responsible browsing
      context</a> or any of its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#ancestor-browsing-context">ancestor browsing contexts</a> has a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container">browsing context container</a> that isn’t an <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-iframe-element">iframe</a></code> element with
      the <code><a data-link-type="element-sub" href="https://w3c.github.io/mediacapture-main/#iframe-allowusermedia">allowusermedia</a></code> attribute specified, then the <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state-10">permission
      state</a> of any descriptor with a <code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name-2">name</a></code> of <code class="idl"><a data-link-type="idl" href="#dom-permissionname-camera" id="ref-for-dom-permissionname-camera-2">"camera"</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-permissionname-microphone" id="ref-for-dom-permissionname-microphone-2">"microphone"</a></code> must be <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-10">"denied"</a></code>. </p>
     <dl>
      <dt> <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type-7">permission descriptor type</a> 
      <dd>
<pre class="idl def">dictionary <dfn class="idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-devicepermissiondescriptor">DevicePermissionDescriptor<a class="self-link" href="#dictdef-devicepermissiondescriptor"></a></dfn> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-6">PermissionDescriptor</a> {
  DOMString <dfn class="dfn-paneled idl-code" data-dfn-for="DevicePermissionDescriptor" data-dfn-type="dict-member" data-export="" data-type="DOMString " id="dom-devicepermissiondescriptor-deviceid">deviceId</dfn>;
};
</pre>
       <p> A permission covers access to the device given in the associated
          descriptor. </p>
       <p> If the descriptor does not have a <code class="idl"><a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" id="ref-for-dom-devicepermissiondescriptor-deviceid-1">deviceId</a></code>, its semantic is that it
          queries for access to all devices of that class. Thus, if a query for
          the <code class="idl"><a data-link-type="idl" href="#dom-permissionname-camera" id="ref-for-dom-permissionname-camera-3">"camera"</a></code> permission with no <code class="idl"><a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" id="ref-for-dom-devicepermissiondescriptor-deviceid-2">deviceId</a></code> returns <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-7">"granted"</a></code>, the
          client knows that there will never be a permission prompt for a
          camera, and if <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-11">"denied"</a></code> is returned, it knows that no getUserMedia
          request for a camera will succeed. </p>
       <p> If a permission state is present for access to some, but not all,
          cameras, a query without the <code class="idl"><a data-link-type="idl" href="#dom-devicepermissiondescriptor-deviceid" id="ref-for-dom-devicepermissiondescriptor-deviceid-3">deviceId</a></code> will return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt-3">"prompt"</a></code>. </p>
       <p class="issue" id="issue-media-granted"><a class="self-link" href="#issue-media-granted"></a> It may not make sense for <code>{name: "camera"}</code>'s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state-11">permission state</a> to ever be <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-8">"granted"</a></code>: if the UA returns <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-9">"granted"</a></code> from <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state-12">permission state</a>, the above paragraphs say it’s promising to
          return from <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-main/#dom-mediadevices-getusermedia">getUserMedia()</a></code> without prompting no
          matter what the constraints are, but if that call has constraints that
          none of the user’s devices satisfy, the UA cannot return a device. </p>
      <dt> <a data-link-type="dfn" href="#extra-permission-data-type" id="ref-for-extra-permission-data-type-2">extra permission data type</a> 
      <dd> A list of <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-main/#deviceid">deviceId</a></code> values for the devices the user
        has granted access to. 
      <dt> <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type-5">permission result type</a> 
      <dd> TODO 
      <dt> <a data-link-type="dfn" href="#permission-query-algorithm" id="ref-for-permission-query-algorithm-1">permission query algorithm</a> 
      <dd> TODO 
      <dt> <a data-link-type="dfn" href="#permission-request-algorithm" id="ref-for-permission-request-algorithm-1">permission request algorithm</a> 
      <dd> TODO 
      <dt> <a data-link-type="dfn" href="#permission-revocation-algorithm" id="ref-for-permission-revocation-algorithm-2">permission revocation algorithm</a> 
      <dd> TODO: Stop playing/recording data? 
     </dl>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" id="dom-permissionname-device-info">"device-info"</dfn> permission controls access to names and capabilities of input and
      output devices. </p>
     <p> A successful call to the <code>getUserMedia</code> function of <a data-link-type="biblio" href="#biblio-getusermedia">[GETUSERMEDIA]</a> MUST cause permission to be granted for the returned
      devices, and MAY cause other permissions to be granted. </p>
     <p> Stopping a MediaStreamTrack MAY cause permission to be revoked for
      the associated device. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="6.6" id="background-sync"><span class="secno">6.6. </span><span class="content"> Background Sync </span><a class="self-link" href="#background-sync"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" id="dom-permissionname-background-sync">"background-sync"</dfn> permission is the permission associated with the usage of <a data-link-type="biblio" href="#biblio-web-background-sync">[web-background-sync]</a>. </p>
    </section>
    <section>
     <h3 class="heading settled" data-level="6.7" id="persistent-storage"><span class="secno">6.7. </span><span class="content"> Persistent Storage </span><a class="self-link" href="#persistent-storage"></a></h3>
     <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" id="dom-permissionname-persistent-storage">"persistent-storage"</dfn> permission allows an origin to make its <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#site-storage-unit">site storage unit</a> contain a <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#persistent-box">persistent box</a>. <code class="idl"><a data-link-type="idl" href="#dom-permissionname-persistent-storage" id="ref-for-dom-permissionname-persistent-storage-2">"persistent-storage"</a></code> is a <a data-link-type="dfn" href="#boolean-feature" id="ref-for-boolean-feature-3">boolean
      feature</a>. </p>
     <p> If a <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms">realm</a> with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin-2">origin</a> <var>O</var> <a data-link-type="dfn" href="#request-permission-to-use" id="ref-for-request-permission-to-use-1">requests permission to use</a> <code>{name: "persistent-storage"}</code> and
      that algorithm returns <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-10">"granted"</a></code>, then <code>{name: "persistent-storage"}</code>'s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state-13">permission state</a> must be <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-11">"granted"</a></code> in
      all <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms">realms</a> with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin-2">origin</a> <var>O</var> until the UA receives <a data-link-type="dfn" href="#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent-7">new
      information about the user’s intent</a>. </p>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="7" id="status-of-a-permission"><span class="secno">7. </span><span class="content"> Status of a permission </span><a class="self-link" href="#status-of-a-permission"></a></h2>
<pre class="idl def">enum <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export="" id="enumdef-permissionstate">PermissionState</dfn> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted-12">"granted"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied-12">"denied"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt-4">"prompt"</a>,
};
</pre>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionState" data-dfn-type="enum-value" data-export="" id="dom-permissionstate-granted">"granted"</dfn> state represents
    that the caller will be able
    to successfuly access the feature without having the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> asking the user’s permission. </p>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionState" data-dfn-type="enum-value" data-export="" id="dom-permissionstate-denied">"denied"</dfn> state represents
    that the caller will not be
    able to access the feature. </p>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionState" data-dfn-type="enum-value" data-export="" id="dom-permissionstate-prompt">"prompt"</dfn> state represents
    that the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> will be asking the user’s permission if the caller tries to access the
    feature. The user might grant, deny or dismiss the request. </p>
<pre class="idl def">[Exposed=(Window,Worker)]
interface <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="permissionstatus">PermissionStatus</dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a> {
  readonly attribute <a data-link-type="idl-name" href="#enumdef-permissionstate" id="ref-for-enumdef-permissionstate-2">PermissionState</a> <a class="idl-code" data-link-type="attribute" data-readonly="" data-type="PermissionState" href="#dom-permissionstatus-state" id="ref-for-dom-permissionstatus-state-1">state</a>;
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-permissionstatus-onchange" id="ref-for-dom-permissionstatus-onchange-1">onchange</a>;
};
</pre>
    <p> <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus-3">PermissionStatus</a></code> instances are created with a <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionStatus" data-dfn-type="attribute" data-export="" id="dom-permissionstatus-query-slot">[[query]]</dfn> internal slot, which is an
    instance of a feature’s <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type-8">permission descriptor type</a>. </p>
    <p> To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="create-a-permissionstatus">create a PermissionStatus</dfn> for a given <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-7">PermissionDescriptor</a></code> <var>permissionDesc</var>, return a new instance of the <a data-link-type="dfn" href="#permission-result-type" id="ref-for-permission-result-type-6">permission result
    type</a> for the feature named by <code><var>permissionDesc</var>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name-3">name</a></code></code>,
    with the <code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-query-slot" id="ref-for-dom-permissionstatus-query-slot-1">[[query]]</a></code> internal slot initialized to <var>permissionDesc</var>. </p>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionStatus" data-dfn-type="attribute" data-export="" id="dom-permissionstatus-state">state</dfn> attribute MUST return the latest value that was set on the current
    instance. </p>
    <p> The <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionStatus" data-dfn-type="attribute" data-export="" id="dom-permissionstatus-onchange">onchange</dfn> attribute is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">event handler</a> whose corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">event handler event
    type</a> is <code>change</code>. </p>
    <p id="PermissionStatus-update"> Whenever the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> is aware that the state of a <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus-4">PermissionStatus</a></code> instance <var>status</var> has changed,
    it MUST asynchronously run the following steps: </p>
    <ol>
     <li> Run <code><var>status</var>@<code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-query-slot" id="ref-for-dom-permissionstatus-query-slot-2">[[query]]</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name-4">name</a></code></code>’s <a data-link-type="dfn" href="#permission-query-algorithm" id="ref-for-permission-query-algorithm-2">permission
      query algorithm</a>, passing <code><var>status</var>@<code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-query-slot" id="ref-for-dom-permissionstatus-query-slot-3">[[query]]</a></code></code> and <var>status</var>. 
     <li> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> on the <dfn data-dfn-type="dfn" data-noexport="" id="permission-task-source">permission task source<a class="self-link" href="#permission-task-source"></a></dfn> to <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">fire an event</a> named <code>change</code> at <var>status</var>. 
    </ol>
   </section>
   <section>
    <h2 class="heading settled" data-level="8" id="navigator-and-workernavigator-extension"><span class="secno">8. </span><span class="content"> Navigator and WorkerNavigator extension </span><a class="self-link" href="#navigator-and-workernavigator-extension"></a></h2>
    <p> A <code class="idl"><a data-link-type="idl" href="#permissions" id="ref-for-permissions-4">Permissions</a></code> instance is exposed on the <code>navigator</code> object for <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/browsers.html#window">Window</a></code> and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#worker">Worker</a></code> contexts. </p>
<pre class="idl def">[Exposed=(Window)]
partial interface <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/webappapis.html#navigator">Navigator</a> {
  readonly attribute <a data-link-type="idl-name" href="#permissions" id="ref-for-permissions-5">Permissions</a> <dfn class="idl-code" data-dfn-for="Navigator" data-dfn-type="attribute" data-export="" data-readonly="" data-type="Permissions" id="dom-navigator-permissions">permissions<a class="self-link" href="#dom-navigator-permissions"></a></dfn>;
};
</pre>
<pre class="idl def">[Exposed=(Worker)]
partial interface <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator">WorkerNavigator</a> {
  readonly attribute <a data-link-type="idl-name" href="#permissions" id="ref-for-permissions-6">Permissions</a> <dfn class="idl-code" data-dfn-for="WorkerNavigator" data-dfn-type="attribute" data-export="" data-readonly="" data-type="Permissions" id="dom-workernavigator-permissions">permissions<a class="self-link" href="#dom-workernavigator-permissions"></a></dfn>;
};
</pre>
   </section>
   <section>
    <h2 class="heading settled" data-level="9" id="permissions-interface"><span class="secno">9. </span><span class="content"> Permissions interface </span><a class="self-link" href="#permissions-interface"></a></h2>
<pre class="idl def">[Exposed=(Window,Worker)]
interface <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="permissions">Permissions</dfn> {
  Promise&lt;<a data-link-type="idl-name" href="#permissionstatus" id="ref-for-permissionstatus-5">PermissionStatus</a>> <a class="idl-code" data-link-type="method" href="#dom-permissions-query" id="ref-for-dom-permissions-query-2">query</a>(<a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-8">PermissionDescriptor</a> <dfn class="idl-code" data-dfn-for="Permissions/query(permissionDesc)" data-dfn-type="argument" data-export="" id="dom-permissions-query-permissiondesc-permissiondesc">permissionDesc<a class="self-link" href="#dom-permissions-query-permissiondesc-permissiondesc"></a></dfn>);

  Promise&lt;<a data-link-type="idl-name" href="#permissionstatus" id="ref-for-permissionstatus-6">PermissionStatus</a>> <a class="idl-code" data-link-type="method" href="#dom-permissions-request" id="ref-for-dom-permissions-request-2">request</a>(<a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-9">PermissionDescriptor</a> <dfn class="idl-code" data-dfn-for="Permissions/request(permissionDesc)" data-dfn-type="argument" data-export="" id="dom-permissions-request-permissiondesc-permissiondesc">permissionDesc<a class="self-link" href="#dom-permissions-request-permissiondesc-permissiondesc"></a></dfn>);

  Promise&lt;<a data-link-type="idl-name" href="#permissionstatus" id="ref-for-permissionstatus-7">PermissionStatus</a>> <a class="idl-code" data-link-type="method" href="#dom-permissions-revoke" id="ref-for-dom-permissions-revoke-2">revoke</a>(<a data-link-type="idl-name" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-10">PermissionDescriptor</a> <dfn class="idl-code" data-dfn-for="Permissions/revoke(permissionDesc)" data-dfn-type="argument" data-export="" id="dom-permissions-revoke-permissiondesc-permissiondesc">permissionDesc<a class="self-link" href="#dom-permissions-revoke-permissiondesc-permissiondesc"></a></dfn>);
};
</pre>
    <p> When the <dfn class="dfn-paneled idl-code" data-dfn-for="Permissions" data-dfn-type="method" data-export="" data-lt="query(permissionDesc)" id="dom-permissions-query">query()</dfn> method is invoked,
    the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> MUST run the following <dfn data-dfn-type="dfn" data-export="" data-lt="query a permission" id="query-a-permission">query a
    permission<a class="self-link" href="#query-a-permission"></a></dfn> algorithm, passing the parameter <var>permissionDesc</var>: </p>
    <ol>
     <li>
      If <code><var>permissionDesc</var>.name</code> has a <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type-9">permission
    descriptor type</a> other than <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-11">PermissionDescriptor</a></code>, convert the
    underlying ECMAScript object to the <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type-10">permission descriptor type</a> dictionary as <a href="http://heycam.github.io/webidl/#es-dictionary">described</a> in <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a>, then: 
      <ul>
       <li>If that operation failed, return a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code> rejected with
        a <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code> and abort these steps. 
       <li>Otherwise, set <var>permissionDesc</var> to the result of the
        operation. 
      </ul>
     <li>Let <var>promise</var> be a newly-created <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code>. 
     <li>Return <var>promise</var> and continue the following steps
    asynchronously. 
     <li>Run the steps to <a data-link-type="dfn" href="#create-a-permissionstatus" id="ref-for-create-a-permissionstatus-1">create a PermissionStatus</a> for <var>permissionDesc</var>, and let <var>status</var> be the result. 
     <li> Run <code><var>status</var>@<code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-query-slot" id="ref-for-dom-permissionstatus-query-slot-4">[[query]]</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name-5">name</a></code></code>’s <a data-link-type="dfn" href="#permission-query-algorithm" id="ref-for-permission-query-algorithm-3">permission query
      algorithm</a>, passing <code><var>status</var>@<code class="idl"><a data-link-type="idl" href="#dom-permissionstatus-query-slot" id="ref-for-dom-permissionstatus-query-slot-5">[[query]]</a></code></code> and <var>status</var>. 
     <li>Resolve <var>promise</var> with <var>status</var>. 
    </ol>
    <div class="note" role="note"> If a developer wants to check multiple permissions at once, the editors
    recommend the use of <code><code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code>.all()</code>. An example can be
    found in the <a href="#examples">Examples section</a>. </div>
    <p> When the <dfn class="dfn-paneled idl-code" data-dfn-for="Permissions" data-dfn-type="method" data-export="" data-lt="request(permissionDesc)" id="dom-permissions-request">request()</dfn> method is invoked,
    the <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a> MUST run the following algorithm, passing the
    parameter <var>permissionDesc</var>: </p>
    <ol class="algorithm">
     <li>
      If <code><var>permissionDesc</var>.name</code> has a <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type-11">permission
    descriptor type</a> other than <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-12">PermissionDescriptor</a></code>, convert the
    underlying ECMAScript object to the <a data-link-type="dfn" href="#permission-descriptor-type" id="ref-for-permission-descriptor-type-12">permission descriptor type</a> dictionary as <a href="http://heycam.github.io/webidl/#es-dictionary">described</a> in <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a>, then: 
      <ul>
       <li>If that operation failed, return a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code> rejected with
        a <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code> and abort these steps. 
       <li>Otherwise, set <var>permissionDesc</var> to the result of the
        operation. 
      </ul>
     <li>Let <var>promise</var> be a newly-created <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code>. 
     <li>Return <var>promise</var> and continue the following steps
    asynchronously. 
     <li>Run the steps to <a data-link-type="dfn" href="#create-a-permissionstatus" id="ref-for-create-a-permissionstatus-2">create a PermissionStatus</a> for <var>permissionDesc</var>, and let <var>status</var> be the result. 
     <li> Run the <a data-link-type="dfn" href="#permission-request-algorithm" id="ref-for-permission-request-algorithm-2">permission request algorithm</a> of the feature named <code> <var>permissionDesc</var>.name</code> with <var>permissionDesc</var> and <var>status</var> as arguments. 
     <li> If the previous step threw an exception, <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> <var>promise</var> with that
      exception. 
     <li>Otherwise resolve <var>promise</var> with <var>status</var>. 
    </ol>
    <p> When the <dfn class="dfn-paneled idl-code" data-dfn-for="Permissions" data-dfn-type="method" data-export="" id="dom-permissions-revoke">revoke(<var>permissionDesc</var>)</dfn> method
    is invoked, this constitutes <a data-link-type="dfn" href="#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent-8">new information about the user’s intent</a>.
    The UA must return <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">a new promise</a> <var>promise</var> and run the following
    steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>: </p>
    <ol>
     <li> If any tasks run due to <a href="#reacting-to-revocation">§5.3 Reacting to users revoking permission</a>, wait for
      them to finish. 
     <li> <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">Resolve</a> <var>promise</var> with the result of <code><a data-link-type="idl" href="#dom-permissions-query" id="ref-for-dom-permissions-query-3">query(<var>permissionDesc</var>)</a></code>. 
    </ol>
   </section>
   <section>
    <h2 class="heading settled" data-level="10" id="common-permission-algorithms"><span class="secno">10. </span><span class="content"> Common permission algorithms </span><a class="self-link" href="#common-permission-algorithms"></a></h2>
    <p> The <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="boolean-permission-query-algorithm">boolean permission query algorithm</dfn>, given a <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-13">PermissionDescriptor</a></code> <var>permissionDesc</var> and a <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus-8">PermissionStatus</a></code> <var>status</var>, runs the following steps: </p>
    <ol class="algorithm">
     <li> Set <code><var>status</var>.state</code> to <var>permissionDesc</var>’s <a data-link-type="dfn" href="#permission-state" id="ref-for-permission-state-14">permission state</a>. 
    </ol>
    <p> The <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="boolean-permission-request-algorithm">boolean permission request algorithm</dfn>, given a <code class="idl"><a data-link-type="idl" href="#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor-14">PermissionDescriptor</a></code> <var>permissionDesc</var> and a <code class="idl"><a data-link-type="idl" href="#permissionstatus" id="ref-for-permissionstatus-9">PermissionStatus</a></code> <var>status</var>, runs the following steps: </p>
    <ol class="algorithm">
     <li> Run the <a data-link-type="dfn" href="#boolean-permission-query-algorithm" id="ref-for-boolean-permission-query-algorithm-2">boolean permission query algorithm</a> on <var>permissionDesc</var> and <var>status</var>. 
     <li> If <code><var>status</var>.state</code> is not <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt-5">"prompt"</a></code>, abort these steps. 
     <li> <a data-link-type="dfn" href="#request-permission-to-use" id="ref-for-request-permission-to-use-2">Request permission to use</a> <var>permissionDesc</var>. 
     <li>
       Run the <a data-link-type="dfn" href="#boolean-permission-query-algorithm" id="ref-for-boolean-permission-query-algorithm-3">boolean permission query algorithm</a> again on <var>permissionDesc</var> and <var>status</var>. 
      <p class="issue" id="issue-non-persistent-grants"><a class="self-link" href="#issue-non-persistent-grants"></a> On browsers that don’t store permissions persistently within an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">environment settings object</a>, this will always return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-prompt" id="ref-for-dom-permissionstate-prompt-6">"prompt"</a></code>, but still show the user an unnecessary prompt. That may
        mean that no permissions should use the <a data-link-type="dfn" href="#boolean-permission-request-algorithm" id="ref-for-boolean-permission-request-algorithm-2">boolean permission request
        algorithm</a>, since it can never return an appropriate
        object-capability. </p>
    </ol>
   </section>
   <section class="non-normative">
    <h2 class="heading settled" data-level="11" id="examples"><span class="secno">11. </span><span class="content"> Examples </span><a class="self-link" href="#examples"></a></h2>
    <div class="example" id="example-geolocation">
     <a class="self-link" href="#example-geolocation"></a> 
     <p> This example uses the Permissions API to decide whether local news
    should be shown using the Geolocation API or with a button offering to
    add the feature. </p>
<pre class="highlight">&lt;script>
  navigator.permissions.query({name:'geolocation'}).then(function(result) {
    if (result.state == 'granted') {
      showLocalNewsWithGeolocation();
    } else if (result.state == 'prompt') {
      showButtonToEnableLocalNews();
    }
    // Don’t do anything if the permission was denied.
  });
&lt;/script>
</pre>
    </div>
    <div class="example" id="example-notifications">
     <a class="self-link" href="#example-notifications"></a> 
     <p> This example is using the <code class="idl"><a data-link-type="idl" href="#dom-permissionname-notifications" id="ref-for-dom-permissionname-notifications-2">"notifications"</a></code> permission for a
    chat application to show a notification button depending on the
    permission state. </p>
<pre class="highlight">&lt;script>
  function updateNotificationButton(state) {
    document.getElementById('chat-notification-button').disabled = (state == 'denied');
  }

  navigator.permissions.query({name:'notifications'}).then(function(result) {
    updateNotificationButton(result.state);

    result.addEventListener('change', function() {
      updateNotificationButton(this.state);
    });
  });
&lt;/script>
</pre>
    </div>
    <div class="example" id="example-two-permissions">
     <a class="self-link" href="#example-two-permissions"></a> 
     <p> This example is checking whether the page has the <code class="idl"><a data-link-type="idl" href="#dom-permissionname-geolocation" id="ref-for-dom-permissionname-geolocation-2">"geolocation"</a></code> and the <code class="idl"><a data-link-type="idl" href="#dom-permissionname-notifications" id="ref-for-dom-permissionname-notifications-3">"notifications"</a></code> permissions
    using <code><code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-promise">Promise</a></code>.all</code>. </p>
<pre class="highlight">&lt;script>
  Promise.all([navigator.permissions.query({name:'geolocation'}),
               navigator.permissions.query({name:'notifications'})])
  .then(function(result) {
    console.log('Geolocation permission state is ' + result[0].state);
    console.log('Notifications permission state is ' + result[1].state);
  });
&lt;/script>
</pre>
    </div>
    <div class="example" id="example-deviceId">
     <a class="self-link" href="#example-deviceId"></a> 
     <p> This example is checking whether the page has the <code class="idl"><a data-link-type="idl" href="#dom-permissionname-camera" id="ref-for-dom-permissionname-camera-4">"camera"</a></code> permission for the first device in the list. Error checking omitted. </p>
<pre class="highlight">&lt;script>
  navigator.mediaDevices.enumerateDevices()
  .then(function(devices) {
     return navigator.permissions.query({name:'camera',
                                         deviceId: devices[0].deviceId})
  })
  .then(function(result) {
     console.log('Camera permission to first camera is ' + result.state);
  }
  .catch(err => console.log('Bad things happened: ' + err.name));
&lt;/script>
</pre>
    </div>
   </section>
   <section class="non-normative">
    <h2 class="no-num heading settled" id="acknowledgments"><span class="content"> Acknowledgments </span><a class="self-link" href="#acknowledgments"></a></h2>
    <p> The editors would like to thank Adrienne Porter Felt, Anne van
    Kesteren, Domenic Denicola, Jake Archibald and Wendy Seltzer for their
    help with the API design and editorial work. </p>
   </section>
  </main>
  <h2 class="no-ref no-num heading settled" id="conformance"><span class="content">Conformance</span><a class="self-link" href="#conformance"></a></h2>
  <h3 class="no-ref no-num heading settled" id="conventions"><span class="content">Document conventions</span><a class="self-link" href="#conventions"></a></h3>
  <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words “MUST”,
    “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
    “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
  <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
  <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text with <code>class="example"</code>,
    like this: </p>
  <div class="example" id="example-f839f6c8">
   <a class="self-link" href="#example-f839f6c8"></a> 
   <p>This is an example of an informative example.</p>
  </div>
  <p>Informative notes begin with the word “Note” and are set apart from the
    normative text with <code>class="note"</code>, like this: </p>
  <p class="note" role="note">Note, this is an informative note.</p>
  <h3 class="no-ref no-num heading settled" id="conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#conformant-algorithms"></a></h3>
  <p>Requirements phrased in the imperative as part of algorithms (such as
    "strip any leading space characters" or "return false and abort these
    steps") are to be interpreted with the meaning of the key word ("must",
    "should", "may", etc) used in introducing the algorithm.</p>
  <p>Conformance requirements phrased as algorithms or specific steps can be
    implemented in any manner, so long as the end result is equivalent. In
    particular, the algorithms defined in this specification are intended to
    be easy to understand and are not intended to be performant. Implementers
    are encouraged to optimize.</p>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-permissionname-background-sync">"background-sync"</a><span>, in §6.6</span>
   <li><a href="#boolean-feature">boolean feature</a><span>, in §6</span>
   <li><a href="#boolean-permission-query-algorithm">boolean permission query algorithm</a><span>, in §10</span>
   <li><a href="#boolean-permission-request-algorithm">boolean permission request algorithm</a><span>, in §10</span>
   <li><a href="#dom-permissionname-camera">"camera"</a><span>, in §6.5</span>
   <li><a href="#create-a-permissionstatus">create a PermissionStatus</a><span>, in §7</span>
   <li><a href="#dom-permissionstate-denied">"denied"</a><span>, in §7</span>
   <li><a href="#dom-devicepermissiondescriptor-deviceid">deviceId</a><span>, in §6.5</span>
   <li><a href="#dom-permissionname-device-info">"device-info"</a><span>, in §6.5</span>
   <li><a href="#dictdef-devicepermissiondescriptor">DevicePermissionDescriptor</a><span>, in §6.5</span>
   <li><a href="#extra-permission-data">extra permission data</a><span>, in §5.1</span>
   <li><a href="#extra-permission-data-type">extra permission data type</a><span>, in §6</span>
   <li><a href="#dom-permissionname-geolocation">"geolocation"</a><span>, in §6.1</span>
   <li><a href="#dom-permissionstate-granted">"granted"</a><span>, in §7</span>
   <li><a href="#dom-permissionname-microphone">"microphone"</a><span>, in §6.5</span>
   <li><a href="#dom-permissionname-midi">"midi"</a><span>, in §6.4</span>
   <li><a href="#dictdef-midipermissiondescriptor">MidiPermissionDescriptor</a><span>, in §6.4</span>
   <li><a href="#dom-permissiondescriptor-name">name</a><span>, in §4</span>
   <li><a href="#new-information-about-the-users-intent">New information about the user’s intent</a><span>, in §3</span>
   <li><a href="#dom-permissionname-notifications">"notifications"</a><span>, in §6.2</span>
   <li><a href="#dom-permissionstatus-onchange">onchange</a><span>, in §7</span>
   <li><a href="#dictdef-permissiondescriptor">PermissionDescriptor</a><span>, in §4</span>
   <li><a href="#permission-descriptor-type">permission descriptor type</a><span>, in §6</span>
   <li><a href="#enumdef-permissionname">PermissionName</a><span>, in §6</span>
   <li><a href="#permission-query-algorithm">permission query algorithm</a><span>, in §6</span>
   <li><a href="#permission-request-algorithm">permission request algorithm</a><span>, in §6</span>
   <li><a href="#permission-result-type">permission result type</a><span>, in §6</span>
   <li><a href="#permission-revocation-algorithm">permission revocation algorithm</a><span>, in §6</span>
   <li>
    permissions
    <ul>
     <li><a href="#dom-navigator-permissions">attribute for Navigator</a><span>, in §8</span>
     <li><a href="#dom-workernavigator-permissions">attribute for WorkerNavigator</a><span>, in §8</span>
    </ul>
   <li><a href="#permissions">Permissions</a><span>, in §9</span>
   <li><a href="#enumdef-permissionstate">PermissionState</a><span>, in §7</span>
   <li><a href="#permission-state">permission state</a><span>, in §5.1</span>
   <li><a href="#permissionstatus">PermissionStatus</a><span>, in §7</span>
   <li><a href="#permission-task-source">permission task source</a><span>, in §7</span>
   <li><a href="#dom-permissionname-persistent-storage">"persistent-storage"</a><span>, in §6.7</span>
   <li><a href="#powerful-feature">Powerful feature</a><span>, in §3</span>
   <li><a href="#dom-permissionstate-prompt">"prompt"</a><span>, in §7</span>
   <li><a href="#prompt-the-user-to-choose">prompt the user to choose</a><span>, in §5.2</span>
   <li><a href="#dom-permissionname-push">"push"</a><span>, in §6.3</span>
   <li><a href="#dictdef-pushpermissiondescriptor">PushPermissionDescriptor</a><span>, in §6.3</span>
   <li><a href="#dom-permissionstatus-query-slot">[[query]]</a><span>, in §7</span>
   <li><a href="#query-a-permission">query a permission</a><span>, in §9</span>
   <li><a href="#dom-permissions-query">query(permissionDesc)</a><span>, in §9</span>
   <li><a href="#dom-permissions-request">request(permissionDesc)</a><span>, in §9</span>
   <li><a href="#request-permission-to-use">request permission to use</a><span>, in §5.2</span>
   <li><a href="#dom-permissions-revoke">revoke(permissionDesc)</a><span>, in §9</span>
   <li><a href="#dom-permissionname-speaker">"speaker"</a><span>, in §6.5</span>
   <li><a href="#dom-permissionstatus-state">state</a><span>, in §7</span>
   <li><a href="#permissiondescriptor-stronger-than">stronger than</a><span>, in §6</span>
   <li><a href="#dom-midipermissiondescriptor-sysex">sysex</a><span>, in §6.4</span>
   <li><a href="#dom-pushpermissiondescriptor-uservisibleonly">userVisibleOnly</a><span>, in §6.3</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[ECMASCRIPT]</a> defines the following terms:
    <ul>
     <li><a href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a>
     <li><a href="https://tc39.github.io/ecma262/#current-realm">current realm</a>
     <li><a href="https://tc39.github.io/ecma262/#sec-code-realms">realm</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WHATWG-DOM]</a> defines the following terms:
    <ul>
     <li><a href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a>
     <li><a href="https://dom.spec.whatwg.org/#concept-event-fire">fire an event</a>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#navigator">Navigator</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#window">Window</a>
     <li><a href="https://html.spec.whatwg.org/multipage/workers.html#worker">Worker</a>
     <li><a href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator">WorkerNavigator</a>
     <li><a href="https://html.spec.whatwg.org/multipage/#ancestor-browsing-context">ancestor browsing context</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container">browsing context container</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object">current settings object</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">environment settings object</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">event handler event type</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">event handlers</a>
     <li><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-iframe-element">iframe</a>
     <li><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#origin-2">origin</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-browsing-context">responsible browsing context</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop">responsible event loop</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin">same origin</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object">the realm's settings object</a>
    </ul>
   <li>
    <a data-link-type="biblio">[mediacapture-main]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/mediacapture-main/#iframe-allowusermedia">allowusermedia</a>
     <li><a href="https://w3c.github.io/mediacapture-main/#deviceid">deviceId</a>
     <li><a href="https://w3c.github.io/mediacapture-main/#dom-mediadevices-getusermedia">getUserMedia()</a>
    </ul>
   <li>
    <a data-link-type="biblio">[promises-guide]</a> defines the following terms:
    <ul>
     <li><a href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">a new promise</a>
     <li><a href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a>
     <li><a href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a>
    </ul>
   <li>
    <a data-link-type="biblio">[STORAGE]</a> defines the following terms:
    <ul>
     <li><a href="https://storage.spec.whatwg.org/#persistent-box">persistent box</a>
     <li><a href="https://storage.spec.whatwg.org/#site-storage-unit">site storage units</a>
    </ul>
   <li>
    <a data-link-type="biblio">[uievents]</a> defines the following terms:
    <ul>
     <li><a href="https://www.w3.org/TR/uievents/#dfn-user-agent">user agent</a>
    </ul>
   <li>
    <a data-link-type="biblio">[web-bluetooth]</a> defines the following terms:
    <ul>
     <li><a href="https://webbluetoothcg.github.io/web-bluetooth/#dom-permissionname-bluetooth">"bluetooth"</a>
     <li><a href="https://webbluetoothcg.github.io/web-bluetooth/#dictdef-bluetoothrequestdevicefilter">BluetoothRequestDeviceFilter</a>
     <li><a href="https://webbluetoothcg.github.io/web-bluetooth/#typedefdef-bluetoothserviceuuid">BluetoothServiceUUID</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><a href="https://heycam.github.io/webidl/#dom-promise">Promise</a>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-ecmascript">[ECMASCRIPT]
   <dd><a href="https://tc39.github.io/ecma262/">ECMAScript Language Specification</a>. URL: <a href="https://tc39.github.io/ecma262/">https://tc39.github.io/ecma262/</a>
   <dt id="biblio-html">[HTML]
   <dd>Ian Hickson. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-promises-guide">[PROMISES-GUIDE]
   <dd>Domenic Denicola. <a href="https://www.w3.org/2001/tag/doc/promises-guide">Writing Promise-Using Specifications</a>. 16 February 2016. Finding of the W3C TAG. URL: <a href="https://www.w3.org/2001/tag/doc/promises-guide">https://www.w3.org/2001/tag/doc/promises-guide</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-storage">[STORAGE]
   <dd>Anne van Kesteren. <a href="https://storage.spec.whatwg.org/">Storage Standard</a>. Living Standard. URL: <a href="https://storage.spec.whatwg.org/">https://storage.spec.whatwg.org/</a>
   <dt id="biblio-uievents">[UIEVENTS]
   <dd>Gary Kacmarcik; Travis Leithead. <a href="https://w3c.github.io/uievents/">UI Events Specification</a>. 15 December 2015. WD. URL: <a href="https://w3c.github.io/uievents/">https://w3c.github.io/uievents/</a>
   <dt id="biblio-web-bluetooth">[WEB-BLUETOOTH]
   <dd>Jeffrey Yasskin. <a href="https://webbluetoothcg.github.io/web-bluetooth/">Web Bluetooth</a>. Draft Community Group Report. URL: <a href="https://webbluetoothcg.github.io/web-bluetooth/">https://webbluetoothcg.github.io/web-bluetooth/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Cameron McCormack; Boris Zbarsky. <a href="https://heycam.github.io/webidl/">WebIDL Level 1</a>. 8 March 2016. CR. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
   <dt id="biblio-whatwg-dom">[WHATWG-DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-audio-output">[AUDIO-OUTPUT]
   <dd>Justin Uberti; Victoria Kirst. <a href="https://w3c.github.io/mediacapture-output/">Audio Output Devices API</a>. 1 June 2016. WD. URL: <a href="https://w3c.github.io/mediacapture-output/">https://w3c.github.io/mediacapture-output/</a>
   <dt id="biblio-geolocation-api">[geolocation-API]
   <dd>Andrei Popescu. <a href="http://dev.w3.org/geo/api/spec-source.html">Geolocation API Specification</a>. 28 May 2015. PER. URL: <a href="http://dev.w3.org/geo/api/spec-source.html">http://dev.w3.org/geo/api/spec-source.html</a>
   <dt id="biblio-getusermedia">[GETUSERMEDIA]
   <dd>Daniel Burnett; et al. <a href="https://w3c.github.io/mediacapture-main/">Media Capture and Streams</a>. 19 May 2016. CR. URL: <a href="https://w3c.github.io/mediacapture-main/">https://w3c.github.io/mediacapture-main/</a>
   <dt id="biblio-notifications">[NOTIFICATIONS]
   <dd>Anne van Kesteren. <a href="https://notifications.spec.whatwg.org/">Notifications API Standard</a>. Living Standard. URL: <a href="https://notifications.spec.whatwg.org/">https://notifications.spec.whatwg.org/</a>
   <dt id="biblio-push-api">[PUSH-API]
   <dd>Michael van Ouwerkerk; et al. <a href="https://w3c.github.io/push-api/">Push API</a>. 15 December 2015. WD. URL: <a href="https://w3c.github.io/push-api/">https://w3c.github.io/push-api/</a>
   <dt id="biblio-web-background-sync">[WEB-BACKGROUND-SYNC]
   <dd><a href="https://wicg.github.io/BackgroundSync/spec/">Web Background Synchronization specification draft</a>. Living Standard. URL: <a href="https://wicg.github.io/BackgroundSync/spec/">https://wicg.github.io/BackgroundSync/spec/</a>
   <dt id="biblio-webmidi">[WEBMIDI]
   <dd>Chris Wilson; Jussi Kalliokoski. <a href="https://webaudio.github.io/web-midi-api/">Web MIDI API</a>. 17 March 2015. WD. URL: <a href="https://webaudio.github.io/web-midi-api/">https://webaudio.github.io/web-midi-api/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl def">dictionary <a href="#dictdef-permissiondescriptor">PermissionDescriptor</a> {
  required <a data-link-type="idl-name" href="#enumdef-permissionname">PermissionName</a> <a data-type="PermissionName " href="#dom-permissiondescriptor-name">name</a>;
};

enum <a href="#enumdef-permissionname">PermissionName</a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-geolocation">"geolocation"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-notifications">"notifications"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-push">"push"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-midi">"midi"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-camera">"camera"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-microphone">"microphone"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-speaker">"speaker"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-device-info">"device-info"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-background-sync">"background-sync"</a>,
  <a class="idl-code" data-link-type="enum-value" href="https://webbluetoothcg.github.io/web-bluetooth/#dom-permissionname-bluetooth">"bluetooth"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionname-persistent-storage">"persistent-storage"</a>,
};

dictionary <a href="#dictdef-pushpermissiondescriptor">PushPermissionDescriptor</a> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor">PermissionDescriptor</a> {
  boolean <a data-default="false" data-type="boolean " href="#dom-pushpermissiondescriptor-uservisibleonly">userVisibleOnly</a> = false;
};

dictionary <a href="#dictdef-midipermissiondescriptor">MidiPermissionDescriptor</a> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor">PermissionDescriptor</a> {
  boolean <a data-default="false" data-type="boolean " href="#dom-midipermissiondescriptor-sysex">sysex</a> = false;
};

dictionary <a href="#dictdef-devicepermissiondescriptor">DevicePermissionDescriptor</a> : <a data-link-type="idl-name" href="#dictdef-permissiondescriptor">PermissionDescriptor</a> {
  DOMString <a data-type="DOMString " href="#dom-devicepermissiondescriptor-deviceid">deviceId</a>;
};

enum <a href="#enumdef-permissionstate">PermissionState</a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-granted">"granted"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-denied">"denied"</a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-permissionstate-prompt">"prompt"</a>,
};

[Exposed=(Window,Worker)]
interface <a href="#permissionstatus">PermissionStatus</a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a> {
  readonly attribute <a data-link-type="idl-name" href="#enumdef-permissionstate">PermissionState</a> <a class="idl-code" data-link-type="attribute" data-readonly="" data-type="PermissionState" href="#dom-permissionstatus-state">state</a>;
  attribute <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-permissionstatus-onchange">onchange</a>;
};

[Exposed=(Window)]
partial interface <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/webappapis.html#navigator">Navigator</a> {
  readonly attribute <a data-link-type="idl-name" href="#permissions">Permissions</a> <a data-readonly="" data-type="Permissions" href="#dom-navigator-permissions">permissions</a>;
};

[Exposed=(Worker)]
partial interface <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workernavigator">WorkerNavigator</a> {
  readonly attribute <a data-link-type="idl-name" href="#permissions">Permissions</a> <a data-readonly="" data-type="Permissions" href="#dom-workernavigator-permissions">permissions</a>;
};

[Exposed=(Window,Worker)]
interface <a href="#permissions">Permissions</a> {
  Promise&lt;<a data-link-type="idl-name" href="#permissionstatus">PermissionStatus</a>> <a class="idl-code" data-link-type="method" href="#dom-permissions-query">query</a>(<a data-link-type="idl-name" href="#dictdef-permissiondescriptor">PermissionDescriptor</a> <a href="#dom-permissions-query-permissiondesc-permissiondesc">permissionDesc</a>);

  Promise&lt;<a data-link-type="idl-name" href="#permissionstatus">PermissionStatus</a>> <a class="idl-code" data-link-type="method" href="#dom-permissions-request">request</a>(<a data-link-type="idl-name" href="#dictdef-permissiondescriptor">PermissionDescriptor</a> <a href="#dom-permissions-request-permissiondesc-permissiondesc">permissionDesc</a>);

  Promise&lt;<a data-link-type="idl-name" href="#permissionstatus">PermissionStatus</a>> <a class="idl-code" data-link-type="method" href="#dom-permissions-revoke">revoke</a>(<a data-link-type="idl-name" href="#dictdef-permissiondescriptor">PermissionDescriptor</a> <a href="#dom-permissions-revoke-permissiondesc-permissiondesc">permissionDesc</a>);
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Safari is the only known UA that returns different results from this
      algorithm for different settings objects with the same origin. We should
      test which of the <a href="https://html.spec.whatwg.org/multipage/webappapis.html#realms-settings-objects-global-objects">several
      possible settings objects</a> it uses. <a href="#issue-current-entry-incumbent-or-relevant"> ↵ </a></div>
   <div class="issue"> It may not make sense for <code>{name: "camera"}</code>'s <a data-link-type="dfn" href="#permission-state">permission state</a> to ever be <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted">"granted"</a></code>: if the UA returns <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-granted">"granted"</a></code> from <a data-link-type="dfn" href="#permission-state">permission state</a>, the above paragraphs say it’s promising to
          return from <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-main/#dom-mediadevices-getusermedia">getUserMedia()</a></code> without prompting no
          matter what the constraints are, but if that call has constraints that
          none of the user’s devices satisfy, the UA cannot return a device. <a href="#issue-media-granted"> ↵ </a></div>
   <div class="issue"> On browsers that don’t store permissions persistently within an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">environment settings object</a>, this will always return <code class="idl"><a data-link-type="idl" href="#dom-permissionstate-prompt">"prompt"</a></code>, but still show the user an unnecessary prompt. That may
        mean that no permissions should use the <a data-link-type="dfn" href="#boolean-permission-request-algorithm">boolean permission request
        algorithm</a>, since it can never return an appropriate
        object-capability. <a href="#issue-non-persistent-grants"> ↵ </a></div>
  </div>
  <aside class="dfn-panel" data-for="new-information-about-the-users-intent">
   <b><a href="#new-information-about-the-users-intent">#new-information-about-the-users-intent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-new-information-about-the-users-intent-1">5.1. Reading the current permission state</a> <a href="#ref-for-new-information-about-the-users-intent-2">(2)</a>
    <li><a href="#ref-for-new-information-about-the-users-intent-3">5.2. Requesting more permission</a> <a href="#ref-for-new-information-about-the-users-intent-4">(2)</a> <a href="#ref-for-new-information-about-the-users-intent-5">(3)</a>
    <li><a href="#ref-for-new-information-about-the-users-intent-6">6. 
    Permission Registry </a>
    <li><a href="#ref-for-new-information-about-the-users-intent-7">6.7. 
      Persistent Storage </a>
    <li><a href="#ref-for-new-information-about-the-users-intent-8">9. 
    Permissions interface </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="powerful-feature">
   <b><a href="#powerful-feature">#powerful-feature</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-powerful-feature-1">4. 
    Descriptions of permission requests </a>
    <li><a href="#ref-for-powerful-feature-2">5. Permission states</a> <a href="#ref-for-powerful-feature-3">(2)</a>
    <li><a href="#ref-for-powerful-feature-4">5.1. Reading the current permission state</a>
    <li><a href="#ref-for-powerful-feature-5">5.2. Requesting more permission</a>
    <li><a href="#ref-for-powerful-feature-6">6. 
    Permission Registry </a> <a href="#ref-for-powerful-feature-7">(2)</a> <a href="#ref-for-powerful-feature-8">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-permissiondescriptor">
   <b><a href="#dictdef-permissiondescriptor">#dictdef-permissiondescriptor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-permissiondescriptor-1">4. 
    Descriptions of permission requests </a>
    <li><a href="#ref-for-dictdef-permissiondescriptor-2">6. 
    Permission Registry </a> <a href="#ref-for-dictdef-permissiondescriptor-3">(2)</a>
    <li><a href="#ref-for-dictdef-permissiondescriptor-4">6.3. 
      Push </a>
    <li><a href="#ref-for-dictdef-permissiondescriptor-5">6.4. 
      Midi </a>
    <li><a href="#ref-for-dictdef-permissiondescriptor-6">6.5. 
      Media Devices </a>
    <li><a href="#ref-for-dictdef-permissiondescriptor-7">7. 
    Status of a permission </a>
    <li><a href="#ref-for-dictdef-permissiondescriptor-8">9. 
    Permissions interface </a> <a href="#ref-for-dictdef-permissiondescriptor-9">(2)</a> <a href="#ref-for-dictdef-permissiondescriptor-10">(3)</a> <a href="#ref-for-dictdef-permissiondescriptor-11">(4)</a> <a href="#ref-for-dictdef-permissiondescriptor-12">(5)</a>
    <li><a href="#ref-for-dictdef-permissiondescriptor-13">10. 
    Common permission algorithms </a> <a href="#ref-for-dictdef-permissiondescriptor-14">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissiondescriptor-name">
   <b><a href="#dom-permissiondescriptor-name">#dom-permissiondescriptor-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissiondescriptor-name-1">5. Permission states</a>
    <li><a href="#ref-for-dom-permissiondescriptor-name-2">6.5. 
      Media Devices </a>
    <li><a href="#ref-for-dom-permissiondescriptor-name-3">7. 
    Status of a permission </a> <a href="#ref-for-dom-permissiondescriptor-name-4">(2)</a>
    <li><a href="#ref-for-dom-permissiondescriptor-name-5">9. 
    Permissions interface </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="permission-state">
   <b><a href="#permission-state">#permission-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-permission-state-1">5.1. Reading the current permission state</a>
    <li><a href="#ref-for-permission-state-2">5.2. Requesting more permission</a> <a href="#ref-for-permission-state-3">(2)</a> <a href="#ref-for-permission-state-4">(3)</a>
    <li><a href="#ref-for-permission-state-5">6. 
    Permission Registry </a> <a href="#ref-for-permission-state-6">(2)</a> <a href="#ref-for-permission-state-7">(3)</a> <a href="#ref-for-permission-state-8">(4)</a> <a href="#ref-for-permission-state-9">(5)</a>
    <li><a href="#ref-for-permission-state-10">6.5. 
      Media Devices </a> <a href="#ref-for-permission-state-11">(2)</a> <a href="#ref-for-permission-state-12">(3)</a>
    <li><a href="#ref-for-permission-state-13">6.7. 
      Persistent Storage </a>
    <li><a href="#ref-for-permission-state-14">10. 
    Common permission algorithms </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="extra-permission-data">
   <b><a href="#extra-permission-data">#extra-permission-data</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-extra-permission-data-1">5.1. Reading the current permission state</a>
    <li><a href="#ref-for-extra-permission-data-2">6. 
    Permission Registry </a> <a href="#ref-for-extra-permission-data-3">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-permission-to-use">
   <b><a href="#request-permission-to-use">#request-permission-to-use</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-permission-to-use-1">6.7. 
      Persistent Storage </a>
    <li><a href="#ref-for-request-permission-to-use-2">10. 
    Common permission algorithms </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="prompt-the-user-to-choose">
   <b><a href="#prompt-the-user-to-choose">#prompt-the-user-to-choose</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-prompt-the-user-to-choose-1">5.2. Requesting more permission</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-permissionname">
   <b><a href="#enumdef-permissionname">#enumdef-permissionname</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-permissionname-1">4. 
    Descriptions of permission requests </a>
    <li><a href="#ref-for-enumdef-permissionname-2">5.1. Reading the current permission state</a>
    <li><a href="#ref-for-enumdef-permissionname-3">6. 
    Permission Registry </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="permission-descriptor-type">
   <b><a href="#permission-descriptor-type">#permission-descriptor-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-permission-descriptor-type-1">4. 
    Descriptions of permission requests </a>
    <li><a href="#ref-for-permission-descriptor-type-2">5. Permission states</a>
    <li><a href="#ref-for-permission-descriptor-type-3">6. 
    Permission Registry </a> <a href="#ref-for-permission-descriptor-type-4">(2)</a>
    <li><a href="#ref-for-permission-descriptor-type-5">6.3. 
      Push </a>
    <li><a href="#ref-for-permission-descriptor-type-6">6.4. 
      Midi </a>
    <li><a href="#ref-for-permission-descriptor-type-7">6.5. 
      Media Devices </a>
    <li><a href="#ref-for-permission-descriptor-type-8">7. 
    Status of a permission </a>
    <li><a href="#ref-for-permission-descriptor-type-9">9. 
    Permissions interface </a> <a href="#ref-for-permission-descriptor-type-10">(2)</a> <a href="#ref-for-permission-descriptor-type-11">(3)</a> <a href="#ref-for-permission-descriptor-type-12">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="permissiondescriptor-stronger-than">
   <b><a href="#permissiondescriptor-stronger-than">#permissiondescriptor-stronger-than</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-permissiondescriptor-stronger-than-1">6. 
    Permission Registry </a>
    <li><a href="#ref-for-permissiondescriptor-stronger-than-2">6.3. 
      Push </a>
    <li><a href="#ref-for-permissiondescriptor-stronger-than-3">6.4. 
      Midi </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="extra-permission-data-type">
   <b><a href="#extra-permission-data-type">#extra-permission-data-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-extra-permission-data-type-1">5.1. Reading the current permission state</a>
    <li><a href="#ref-for-extra-permission-data-type-2">6.5. 
      Media Devices </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="permission-result-type">
   <b><a href="#permission-result-type">#permission-result-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-permission-result-type-1">6. 
    Permission Registry </a> <a href="#ref-for-permission-result-type-2">(2)</a> <a href="#ref-for-permission-result-type-3">(3)</a> <a href="#ref-for-permission-result-type-4">(4)</a>
    <li><a href="#ref-for-permission-result-type-5">6.5. 
      Media Devices </a>
    <li><a href="#ref-for-permission-result-type-6">7. 
    Status of a permission </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="permission-query-algorithm">
   <b><a href="#permission-query-algorithm">#permission-query-algorithm</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-permission-query-algorithm-1">6.5. 
      Media Devices </a>
    <li><a href="#ref-for-permission-query-algorithm-2">7. 
    Status of a permission </a>
    <li><a href="#ref-for-permission-query-algorithm-3">9. 
    Permissions interface </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="permission-request-algorithm">
   <b><a href="#permission-request-algorithm">#permission-request-algorithm</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-permission-request-algorithm-1">6.5. 
      Media Devices </a>
    <li><a href="#ref-for-permission-request-algorithm-2">9. 
    Permissions interface </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="permission-revocation-algorithm">
   <b><a href="#permission-revocation-algorithm">#permission-revocation-algorithm</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-permission-revocation-algorithm-1">5.3. Reacting to users revoking permission</a>
    <li><a href="#ref-for-permission-revocation-algorithm-2">6.5. 
      Media Devices </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="boolean-feature">
   <b><a href="#boolean-feature">#boolean-feature</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-boolean-feature-1">6.1. 
      Geolocation </a>
    <li><a href="#ref-for-boolean-feature-2">6.2. 
      Notifications </a>
    <li><a href="#ref-for-boolean-feature-3">6.7. 
      Persistent Storage </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionname-geolocation">
   <b><a href="#dom-permissionname-geolocation">#dom-permissionname-geolocation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionname-geolocation-1">6. 
    Permission Registry </a>
    <li><a href="#ref-for-dom-permissionname-geolocation-2">11. 
    Examples </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionname-notifications">
   <b><a href="#dom-permissionname-notifications">#dom-permissionname-notifications</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionname-notifications-1">6. 
    Permission Registry </a>
    <li><a href="#ref-for-dom-permissionname-notifications-2">11. 
    Examples </a> <a href="#ref-for-dom-permissionname-notifications-3">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionname-push">
   <b><a href="#dom-permissionname-push">#dom-permissionname-push</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionname-push-1">6. 
    Permission Registry </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionname-midi">
   <b><a href="#dom-permissionname-midi">#dom-permissionname-midi</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionname-midi-1">4. 
    Descriptions of permission requests </a>
    <li><a href="#ref-for-dom-permissionname-midi-2">6. 
    Permission Registry </a> <a href="#ref-for-dom-permissionname-midi-3">(2)</a> <a href="#ref-for-dom-permissionname-midi-4">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionname-camera">
   <b><a href="#dom-permissionname-camera">#dom-permissionname-camera</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionname-camera-1">6. 
    Permission Registry </a>
    <li><a href="#ref-for-dom-permissionname-camera-2">6.5. 
      Media Devices </a> <a href="#ref-for-dom-permissionname-camera-3">(2)</a>
    <li><a href="#ref-for-dom-permissionname-camera-4">11. 
    Examples </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionname-microphone">
   <b><a href="#dom-permissionname-microphone">#dom-permissionname-microphone</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionname-microphone-1">6. 
    Permission Registry </a>
    <li><a href="#ref-for-dom-permissionname-microphone-2">6.5. 
      Media Devices </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionname-speaker">
   <b><a href="#dom-permissionname-speaker">#dom-permissionname-speaker</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionname-speaker-1">6. 
    Permission Registry </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-devicepermissiondescriptor-deviceid">
   <b><a href="#dom-devicepermissiondescriptor-deviceid">#dom-devicepermissiondescriptor-deviceid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-devicepermissiondescriptor-deviceid-1">6.5. 
      Media Devices </a> <a href="#ref-for-dom-devicepermissiondescriptor-deviceid-2">(2)</a> <a href="#ref-for-dom-devicepermissiondescriptor-deviceid-3">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionname-device-info">
   <b><a href="#dom-permissionname-device-info">#dom-permissionname-device-info</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionname-device-info-1">6. 
    Permission Registry </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionname-background-sync">
   <b><a href="#dom-permissionname-background-sync">#dom-permissionname-background-sync</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionname-background-sync-1">6. 
    Permission Registry </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionname-persistent-storage">
   <b><a href="#dom-permissionname-persistent-storage">#dom-permissionname-persistent-storage</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionname-persistent-storage-1">6. 
    Permission Registry </a>
    <li><a href="#ref-for-dom-permissionname-persistent-storage-2">6.7. 
      Persistent Storage </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-permissionstate">
   <b><a href="#enumdef-permissionstate">#enumdef-permissionstate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-permissionstate-1">5.1. Reading the current permission state</a>
    <li><a href="#ref-for-enumdef-permissionstate-2">7. 
    Status of a permission </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionstate-granted">
   <b><a href="#dom-permissionstate-granted">#dom-permissionstate-granted</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionstate-granted-1">5.1. Reading the current permission state</a>
    <li><a href="#ref-for-dom-permissionstate-granted-2">5.2. Requesting more permission</a> <a href="#ref-for-dom-permissionstate-granted-3">(2)</a> <a href="#ref-for-dom-permissionstate-granted-4">(3)</a>
    <li><a href="#ref-for-dom-permissionstate-granted-5">6. 
    Permission Registry </a> <a href="#ref-for-dom-permissionstate-granted-6">(2)</a>
    <li><a href="#ref-for-dom-permissionstate-granted-7">6.5. 
      Media Devices </a> <a href="#ref-for-dom-permissionstate-granted-8">(2)</a> <a href="#ref-for-dom-permissionstate-granted-9">(3)</a>
    <li><a href="#ref-for-dom-permissionstate-granted-10">6.7. 
      Persistent Storage </a> <a href="#ref-for-dom-permissionstate-granted-11">(2)</a>
    <li><a href="#ref-for-dom-permissionstate-granted-12">7. 
    Status of a permission </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionstate-denied">
   <b><a href="#dom-permissionstate-denied">#dom-permissionstate-denied</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionstate-denied-1">5.1. Reading the current permission state</a>
    <li><a href="#ref-for-dom-permissionstate-denied-2">5.2. Requesting more permission</a> <a href="#ref-for-dom-permissionstate-denied-3">(2)</a> <a href="#ref-for-dom-permissionstate-denied-4">(3)</a> <a href="#ref-for-dom-permissionstate-denied-5">(4)</a> <a href="#ref-for-dom-permissionstate-denied-6">(5)</a> <a href="#ref-for-dom-permissionstate-denied-7">(6)</a>
    <li><a href="#ref-for-dom-permissionstate-denied-8">6. 
    Permission Registry </a> <a href="#ref-for-dom-permissionstate-denied-9">(2)</a>
    <li><a href="#ref-for-dom-permissionstate-denied-10">6.5. 
      Media Devices </a> <a href="#ref-for-dom-permissionstate-denied-11">(2)</a>
    <li><a href="#ref-for-dom-permissionstate-denied-12">7. 
    Status of a permission </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionstate-prompt">
   <b><a href="#dom-permissionstate-prompt">#dom-permissionstate-prompt</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionstate-prompt-1">5.1. Reading the current permission state</a>
    <li><a href="#ref-for-dom-permissionstate-prompt-2">5.2. Requesting more permission</a>
    <li><a href="#ref-for-dom-permissionstate-prompt-3">6.5. 
      Media Devices </a>
    <li><a href="#ref-for-dom-permissionstate-prompt-4">7. 
    Status of a permission </a>
    <li><a href="#ref-for-dom-permissionstate-prompt-5">10. 
    Common permission algorithms </a> <a href="#ref-for-dom-permissionstate-prompt-6">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="permissionstatus">
   <b><a href="#permissionstatus">#permissionstatus</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-permissionstatus-1">6. 
    Permission Registry </a> <a href="#ref-for-permissionstatus-2">(2)</a>
    <li><a href="#ref-for-permissionstatus-3">7. 
    Status of a permission </a> <a href="#ref-for-permissionstatus-4">(2)</a>
    <li><a href="#ref-for-permissionstatus-5">9. 
    Permissions interface </a> <a href="#ref-for-permissionstatus-6">(2)</a> <a href="#ref-for-permissionstatus-7">(3)</a>
    <li><a href="#ref-for-permissionstatus-8">10. 
    Common permission algorithms </a> <a href="#ref-for-permissionstatus-9">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionstatus-query-slot">
   <b><a href="#dom-permissionstatus-query-slot">#dom-permissionstatus-query-slot</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionstatus-query-slot-1">7. 
    Status of a permission </a> <a href="#ref-for-dom-permissionstatus-query-slot-2">(2)</a> <a href="#ref-for-dom-permissionstatus-query-slot-3">(3)</a>
    <li><a href="#ref-for-dom-permissionstatus-query-slot-4">9. 
    Permissions interface </a> <a href="#ref-for-dom-permissionstatus-query-slot-5">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="create-a-permissionstatus">
   <b><a href="#create-a-permissionstatus">#create-a-permissionstatus</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-create-a-permissionstatus-1">9. 
    Permissions interface </a> <a href="#ref-for-create-a-permissionstatus-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionstatus-state">
   <b><a href="#dom-permissionstatus-state">#dom-permissionstatus-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionstatus-state-1">7. 
    Status of a permission </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionstatus-onchange">
   <b><a href="#dom-permissionstatus-onchange">#dom-permissionstatus-onchange</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionstatus-onchange-1">7. 
    Status of a permission </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="permissions">
   <b><a href="#permissions">#permissions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-permissions-1">6. 
    Permission Registry </a> <a href="#ref-for-permissions-2">(2)</a> <a href="#ref-for-permissions-3">(3)</a>
    <li><a href="#ref-for-permissions-4">8. 
    Navigator and WorkerNavigator extension </a> <a href="#ref-for-permissions-5">(2)</a> <a href="#ref-for-permissions-6">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissions-query">
   <b><a href="#dom-permissions-query">#dom-permissions-query</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissions-query-1">6. 
    Permission Registry </a>
    <li><a href="#ref-for-dom-permissions-query-2">9. 
    Permissions interface </a> <a href="#ref-for-dom-permissions-query-3">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissions-request">
   <b><a href="#dom-permissions-request">#dom-permissions-request</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissions-request-1">6. 
    Permission Registry </a>
    <li><a href="#ref-for-dom-permissions-request-2">9. 
    Permissions interface </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissions-revoke">
   <b><a href="#dom-permissions-revoke">#dom-permissions-revoke</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissions-revoke-1">6. 
    Permission Registry </a>
    <li><a href="#ref-for-dom-permissions-revoke-2">9. 
    Permissions interface </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="boolean-permission-query-algorithm">
   <b><a href="#boolean-permission-query-algorithm">#boolean-permission-query-algorithm</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-boolean-permission-query-algorithm-1">6. 
    Permission Registry </a>
    <li><a href="#ref-for-boolean-permission-query-algorithm-2">10. 
    Common permission algorithms </a> <a href="#ref-for-boolean-permission-query-algorithm-3">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="boolean-permission-request-algorithm">
   <b><a href="#boolean-permission-request-algorithm">#boolean-permission-request-algorithm</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-boolean-permission-request-algorithm-1">6. 
    Permission Registry </a>
    <li><a href="#ref-for-boolean-permission-request-algorithm-2">10. 
    Common permission algorithms </a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

        document.body.addEventListener("click", function(e) {
            var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while(el.parentElement) {
                if(el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if(el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if(el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if(target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if(target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if(dfnPanel) {
                    console.log(dfnPanel);
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if(target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
        </script>